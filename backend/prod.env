# ============================================================================
# Total Life AI - Production Environment Configuration
# ============================================================================
# This file contains production-ready environment variables
# DO NOT commit actual secrets to version control!
# ============================================================================

# ===============================================
# APPLICATION SETTINGS
# ===============================================

ENVIRONMENT=production
DEBUG=False
LOG_LEVEL=INFO

# ===============================================
# AI PROVIDER SETTINGS (COST OPTIMIZED!)
# ===============================================

# Primary provider for most queries - Together AI saves 90%!
AI_PRIMARY_PROVIDER=together

# Fallback provider for complex queries
AI_FALLBACK_PROVIDER=bedrock

# ===============================================
# MODEL CONFIGURATIONS  
# ===============================================

# Together AI - Cost optimized models
TOGETHER_MODEL=meta-llama/Llama-3.1-8B-Instruct-Turbo

# OpenAI - Fallback models (cost optimized)
OPENAI_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# AWS Bedrock - Alternative cost optimized
BEDROCK_MODEL=anthropic.claude-3-haiku-20240307-v1:0
BEDROCK_EMBEDDING_MODEL=amazon.titan-embed-text-v1

# ===============================================
# DATABASE CONFIGURATION  
# ===============================================

# Database connection details (provided by AWS ECS from secrets)
# DATABASE_HOST, DATABASE_PORT, DATABASE_NAME are provided as environment variables
# DATABASE_USERNAME, DATABASE_PASSWORD are provided as secrets
# The application will construct: postgresql://username:password@host:port/database

# Connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ===============================================
# VECTOR DATABASE
# ===============================================

VECTOR_DB_PATH=/app/data/chroma_db
VECTOR_COLLECTION_NAME=totallifeai_knowledge_prod

# ===============================================
# SECURITY SETTINGS
# ===============================================

# JWT settings
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
ALGORITHM=HS256

# CORS settings
ALLOWED_ORIGINS=["https://*.cloudfront.net", "https://*.amazonaws.com"]
ALLOWED_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS"]
ALLOWED_HEADERS=["*"]

# ===============================================
# RATE LIMITING & COST CONTROL
# ===============================================

# Per-minute rate limits
MAX_REQUESTS_PER_MINUTE=60
MAX_CHAT_REQUESTS_PER_MINUTE=10

# Daily limits by user tier
FREE_TIER_DAILY_LIMIT=100
PREMIUM_TIER_DAILY_LIMIT=1000
ENTERPRISE_TIER_DAILY_LIMIT=10000

# Token limits
MAX_TOKENS_PER_REQUEST=4000
MAX_TOKENS_PER_USER_PER_DAY=50000

# Query complexity thresholds
SIMPLE_QUERY_MAX_TOKENS=1000
MODERATE_QUERY_MAX_TOKENS=2000
COMPLEX_QUERY_MAX_TOKENS=4000

# Cost tracking
ENABLE_COST_TRACKING=True
COST_ALERT_THRESHOLD=10.00

# ===============================================
# CACHING
# ===============================================

# Redis cache settings (if using Redis)
REDIS_URL=redis://localhost:6379/0
CACHE_TTL_SECONDS=300
ENABLE_QUERY_CACHING=True

# In-memory cache settings
MEMORY_CACHE_SIZE=1000
MEMORY_CACHE_TTL=300

# ===============================================
# FILE STORAGE
# ===============================================

# S3 settings for file uploads
S3_BUCKET_NAME=totallifeai-uploads-${AWS_ACCOUNT_ID}-${AWS_REGION}
S3_PREFIX=user-uploads/
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES=["pdf", "txt", "md", "docx", "csv", "json"]

# Local file storage fallback
LOCAL_STORAGE_PATH=/app/data/uploads
MAX_STORAGE_SIZE_GB=5

# ===============================================
# MONITORING & LOGGING
# ===============================================

# Logging configuration
LOG_FORMAT=json
LOG_TO_FILE=True
LOG_FILE_PATH=/app/logs/app.log
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=5

# Metrics and monitoring
ENABLE_METRICS=True
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30

# AWS CloudWatch
ENABLE_CLOUDWATCH=True
CLOUDWATCH_LOG_GROUP=/aws/ecs/totallifeai
CLOUDWATCH_RETENTION_DAYS=7

# ===============================================
# FEATURE FLAGS
# ===============================================

# AI features
ENABLE_TOGETHER_AI=True
ENABLE_BEDROCK=True
ENABLE_OPENAI_FALLBACK=True

# Data source features
ENABLE_YNAB_INTEGRATION=True
ENABLE_OBSIDIAN_INTEGRATION=True
ENABLE_GOOGLE_INTEGRATION=False
ENABLE_APPLE_HEALTH_INTEGRATION=False

# Advanced features
ENABLE_CONVERSATION_MEMORY=True
ENABLE_SEMANTIC_SEARCH=True
ENABLE_AUTO_SUMMARIZATION=True
ENABLE_MULTI_LANGUAGE=False

# ===============================================
# PERFORMANCE TUNING
# ===============================================

# Async settings
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT_SECONDS=300
KEEP_ALIVE_TIMEOUT=5

# Worker settings
WORKER_COUNT=2
WORKER_MAX_REQUESTS=1000
WORKER_MAX_REQUESTS_JITTER=50

# ===============================================
# BACKUP & DISASTER RECOVERY
# ===============================================

# Database backup
AUTO_BACKUP_ENABLED=True
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Data export
ENABLE_DATA_EXPORT=True
EXPORT_FORMAT=json
EXPORT_ENCRYPTION=True

# ===============================================
# COMPLIANCE & PRIVACY
# ===============================================

# Data retention
USER_DATA_RETENTION_DAYS=365
CONVERSATION_RETENTION_DAYS=90
LOG_RETENTION_DAYS=30

# Privacy settings
ENABLE_GDPR_COMPLIANCE=True
ENABLE_USER_DATA_DELETION=True
ANONYMIZE_LOGS=True

# Audit logging
ENABLE_AUDIT_LOG=True
AUDIT_LOG_LEVEL=INFO
SENSITIVE_FIELD_MASKING=True
